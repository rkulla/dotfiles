"use strict";var N=Object.create;var v=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty;var E=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),I=(t,n)=>{for(var r in n)v(t,r,{get:n[r],enumerable:!0})},j=(t,n,r,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let e of U(n))!T.call(t,e)&&e!==r&&v(t,e,{get:()=>n[e],enumerable:!(a=L(n,e))||a.enumerable});return t};var W=(t,n,r)=>(r=t!=null?N(K(t)):{},j(n||!t||!t.__esModule?v(r,"default",{value:t,enumerable:!0}):r,t)),M=t=>j(v({},"__esModule",{value:!0}),t);var C=E(p=>{"use strict";var A=p&&p.__assign||function(){return A=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},A.apply(this,arguments)},$=p&&p.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n};Object.defineProperty(p,"__esModule",{value:!0});var q=$(require("child_process"));function x(t){return Array.isArray(t)&&Object.prototype.hasOwnProperty.call(t,"raw")}function B(t,n){for(var r="",a=t.length,e=0;e<a;e++){var s=e<a-1?n[e]:"";r+=t[e]+s}return r.trim()}function d(t,n,r){return r===void 0&&(r={}),process.platform!=="darwin"?Promise.reject(new Error("osascript-tag requires macOS")):new Promise(function(a,e){var s=r.argv||[],l=[],o=B(t,n),O="AppleScript";r.language==="JavaScript"&&(O=r.language,o="(function(...argv){"+o+"})("+s.map(function(c){return JSON.stringify(c)})+")"),r.parse&&(l=["-s","s"]),typeof r.flags=="string"&&(l=["-s",r.flags]);var h=q.spawn("osascript",["-l",O].concat(l,["-e",o])),S="";h.stderr.on("data",function(c){S+=c.toString()});var y="";h.stdout.on("data",function(c){y+=c.toString()}),h.on("close",function(){if(S)e(S);else{var c=y;if(r.parse)try{c=JSON.parse(y)}catch(b){e(b)}a(c)}}),h.on("error",function(c){e(c)})})}function J(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return x(t)?d(t,n,{}):function(a){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];return d(a,e,t)}}function k(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return x(t)?d(t,n,{language:"JavaScript"}):function(a){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];return d(a,e,A({language:"JavaScript"},t))}}J.jxa=k;p.jxa=k;p.default=J});var z={};I(z,{default:()=>R});module.exports=M(z);var i=require("@raycast/api");var u=require("@raycast/api");async function V(){return(await(0,u.getApplications)()).some(({bundleId:r})=>r==="net.shinystone.OKJSON")}async function w(){return await V()?Promise.resolve(!0):(await(0,u.confirmAlert)({title:"OK JSON is not installed.",message:"Do you want to install it right now?",primaryAction:{title:"Install",onAction:async()=>{(0,u.open)("https://apps.apple.com/app/ok-json-offline-private/id1576121509?mt=12"),await(0,u.popToRoot)({clearSearchBar:!1})}},dismissAction:{title:"Cancel",onAction:async()=>{await(0,u.popToRoot)({clearSearchBar:!1})}}}),Promise.resolve(!1))}var f=require("@raycast/api"),F=W(C()),X=async(t,n)=>{try{return await F.default.jxa({parse:!0,argv:n})`${t}`}catch(r){if(typeof r=="string"){let a=r.replace("execution error: Error: ","");a.match(/Application can't be found/)?(0,f.showToast)({style:f.Toast.Style.Failure,title:"Application not found",message:"Things must be running"}):(0,f.showToast)({style:f.Toast.Style.Failure,title:"Something went wrong",message:a})}}};var P=t=>X(`
    const okjson = Application('net.shinystone.OKJSON');
    const text = argv[0]
    okjson.viewFromURL(text)
	`,[t]);var g=require("react"),m=require("react/jsx-runtime");function R(){let[t,n]=(0,g.useState)(""),[r,a]=(0,g.useState)(),e="Please provide the URL.";function s(l){let o=l;a(void 0),n(o)}return(0,g.useEffect)(()=>{w().then(l=>{l&&i.Clipboard.readText().then(o=>{o&&(o.startsWith("https://")||o.startsWith("http://"))&&n(o)})})},[]),(0,m.jsx)(i.Form,{actions:(0,m.jsx)(i.ActionPanel,{children:(0,m.jsx)(i.Action.SubmitForm,{onSubmit:l=>{let o=l.command;o&&(o.startsWith("https://")||o.startsWith("http://"))?(P(o),(0,i.popToRoot)()):a(o?"Should starts with \u201Chttp\u201D or \u201Chttps\u201D.":e)}})}),children:(0,m.jsx)(i.Form.TextField,{id:"command",value:t,error:r,onChange:s,title:"URL",placeholder:"View URL Response in OK JSON"})})}
